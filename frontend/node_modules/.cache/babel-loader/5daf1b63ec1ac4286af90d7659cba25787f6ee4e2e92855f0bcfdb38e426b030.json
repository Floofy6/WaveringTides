{"ast":null,"code":"import React,{useState}from'react';import{useSkills}from'../../hooks/useSkills';import SkillProgressBar from'./SkillProgressBar';import{useGameContext}from'../../context/GameContext';/**\n * SkillPanel component - Displays player skills and their progression\n * Optimized for desktop-only viewing\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SkillPanel=()=>{const{skills,currentSkill,selectSkill,startSkill,stopSkill}=useSkills();const{loading}=useGameContext();const[expandedSkillId,setExpandedSkillId]=useState(null);/**\n   * Handler to toggle skill activity state\n   */const handleToggleSkill=(skill,e)=>{e.stopPropagation();// Prevent triggering the skill selection\nif(skill.isActive){stopSkill(skill.id);}else{startSkill(skill.id);}};const toggleSkillDetails=skillId=>{setExpandedSkillId(expandedSkillId===skillId?null:skillId);selectSkill(skillId);};// Calculate action progress percentage\nconst getActionProgress=skill=>{if(!skill.isActive||!skill.actionProgress)return 0;// Calculate percentage of action completion\nreturn Math.min(Math.floor((skill.actionProgress||0)*100),100);};// Show loading state\nif(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-panel border border-panel-border rounded-lg p-4 shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Skills\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center h-48 text-gray-500 italic\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin mr-3 h-6 w-6 border-2 border-primary border-t-transparent rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Loading skills...\"})]})]});}// Handle case where skills might not be available\nif(!skills||Object.keys(skills).length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-panel border border-panel-border rounded-lg p-4 shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Skills\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-48 text-gray-500 italic\",children:\"No skills available yet\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-panel border border-panel-border rounded-lg p-4 shadow-md h-full\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Skills\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-1\",children:Object.values(skills).filter(Boolean).map(skill=>/*#__PURE__*/_jsxs(\"div\",{className:`bg-panel border rounded-lg p-3 cursor-pointer transition-all duration-200 hover:shadow-md ${(currentSkill===null||currentSkill===void 0?void 0:currentSkill.id)===skill.id?'border-primary shadow-sm':'border-panel-border'}`,onClick:()=>toggleSkillDetails(skill.id),tabIndex:0,\"aria-label\":`${skill.name} skill, level ${skill.level}`,onKeyDown:e=>e.key==='Enter'&&toggleSkillDetails(skill.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-base\",children:skill.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-primary text-white text-xs font-semibold px-2 py-1 rounded-full\",children:[\"Level \",skill.level]})]}),/*#__PURE__*/_jsx(SkillProgressBar,{skill:skill,showActionProgress:true}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mt-3\",children:/*#__PURE__*/_jsx(\"button\",{className:`px-4 py-1.5 rounded text-sm font-medium transition-colors ${skill.isActive?'bg-danger text-white hover:bg-danger/90':'bg-primary text-white hover:bg-primary-dark'}`,onClick:e=>handleToggleSkill(skill,e),\"aria-label\":skill.isActive?`Stop ${skill.name}`:`Start ${skill.name}`,children:skill.isActive?'Stop':'Start'})}),expandedSkillId===skill.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"XP per action:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium ml-1\",children:skill.xpPerAction})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:`font-medium ml-1 ${skill.isActive?'text-success':'text-gray-600'}`,children:skill.isActive?'Active':'Inactive'})]})]}),skill.mastery&&skill.mastery.unlocks&&Object.keys(skill.mastery.unlocks).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold mb-2\",children:\"Mastery Unlocks\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-sm space-y-1.5\",children:Object.entries(skill.mastery.unlocks).map(_ref=>{let[level,description]=_ref;return/*#__PURE__*/_jsxs(\"li\",{className:`py-1 border-b border-gray-100 ${skill.level>=parseInt(level)?'text-gray-800':'text-gray-400'}`,children:[/*#__PURE__*/_jsxs(\"span\",{className:`inline-block w-16 font-medium ${skill.level>=parseInt(level)?'text-primary':''}`,children:[\"Level \",level,\":\"]}),description]},level);})})]})]})]},skill.id))})]});};export default SkillPanel;","map":{"version":3,"names":["React","useState","useSkills","SkillProgressBar","useGameContext","jsx","_jsx","jsxs","_jsxs","SkillPanel","skills","currentSkill","selectSkill","startSkill","stopSkill","loading","expandedSkillId","setExpandedSkillId","handleToggleSkill","skill","e","stopPropagation","isActive","id","toggleSkillDetails","skillId","getActionProgress","actionProgress","Math","min","floor","className","children","Object","keys","length","values","filter","Boolean","map","onClick","tabIndex","name","level","onKeyDown","key","showActionProgress","xpPerAction","mastery","unlocks","entries","_ref","description","parseInt"],"sources":["C:/Users/Domin/Desktop/coding/WaveringTides-master/frontend/src/features/skills/SkillPanel.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSkills } from '../../hooks/useSkills';\nimport SkillProgressBar from './SkillProgressBar';\nimport { Skill } from '../../types';\nimport { useGameContext } from '../../context/GameContext';\n\n/**\n * SkillPanel component - Displays player skills and their progression\n * Optimized for desktop-only viewing\n */\nconst SkillPanel: React.FC = () => {\n  const { skills, currentSkill, selectSkill, startSkill, stopSkill } = useSkills();\n  const { loading } = useGameContext();\n  const [expandedSkillId, setExpandedSkillId] = useState<string | null>(null);\n  \n  /**\n   * Handler to toggle skill activity state\n   */\n  const handleToggleSkill = (skill: Skill, e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent triggering the skill selection\n    if (skill.isActive) {\n      stopSkill(skill.id);\n    } else {\n      startSkill(skill.id);\n    }\n  };\n\n  const toggleSkillDetails = (skillId: string) => {\n    setExpandedSkillId(expandedSkillId === skillId ? null : skillId);\n    selectSkill(skillId);\n  };\n  \n  // Calculate action progress percentage\n  const getActionProgress = (skill: Skill): number => {\n    if (!skill.isActive || !skill.actionProgress) return 0;\n    \n    // Calculate percentage of action completion\n    return Math.min(Math.floor((skill.actionProgress || 0) * 100), 100);\n  };\n\n  // Show loading state\n  if (loading) {\n    return (\n      <div className=\"bg-panel border border-panel-border rounded-lg p-4 shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Skills</h2>\n        <div className=\"flex items-center justify-center h-48 text-gray-500 italic\">\n          <div className=\"animate-spin mr-3 h-6 w-6 border-2 border-primary border-t-transparent rounded-full\"></div>\n          <span>Loading skills...</span>\n        </div>\n      </div>\n    );\n  }\n  \n  // Handle case where skills might not be available\n  if (!skills || Object.keys(skills).length === 0) {\n    return (\n      <div className=\"bg-panel border border-panel-border rounded-lg p-4 shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Skills</h2>\n        <div className=\"flex items-center justify-center h-48 text-gray-500 italic\">\n          No skills available yet\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"bg-panel border border-panel-border rounded-lg p-4 shadow-md h-full\">\n      <h2 className=\"text-xl font-semibold mb-4\">Skills</h2>\n      \n      <div className=\"grid grid-cols-1 gap-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-1\">\n        {Object.values(skills).filter(Boolean).map((skill: Skill) => (\n          <div \n            key={skill.id} \n            className={`bg-panel border rounded-lg p-3 cursor-pointer transition-all duration-200 hover:shadow-md ${\n              currentSkill?.id === skill.id ? 'border-primary shadow-sm' : 'border-panel-border'\n            }`}\n            onClick={() => toggleSkillDetails(skill.id)}\n            tabIndex={0}\n            aria-label={`${skill.name} skill, level ${skill.level}`}\n            onKeyDown={(e) => e.key === 'Enter' && toggleSkillDetails(skill.id)}\n          >\n            <div className=\"flex justify-between items-center mb-2\">\n              <div className=\"font-medium text-base\">{skill.name}</div>\n              <span className=\"bg-primary text-white text-xs font-semibold px-2 py-1 rounded-full\">\n                Level {skill.level}\n              </span>\n            </div>\n            \n            <SkillProgressBar skill={skill} showActionProgress={true} />\n            \n            <div className=\"flex justify-end mt-3\">\n              <button\n                className={`px-4 py-1.5 rounded text-sm font-medium transition-colors ${\n                  skill.isActive \n                    ? 'bg-danger text-white hover:bg-danger/90' \n                    : 'bg-primary text-white hover:bg-primary-dark'\n                }`}\n                onClick={(e) => handleToggleSkill(skill, e)}\n                aria-label={skill.isActive ? `Stop ${skill.name}` : `Start ${skill.name}`}\n              >\n                {skill.isActive ? 'Stop' : 'Start'}\n              </button>\n            </div>\n            \n            {expandedSkillId === skill.id && (\n              <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                <div className=\"grid grid-cols-2 gap-2 mb-2\">\n                  <div className=\"text-sm\">\n                    <span className=\"text-gray-500\">XP per action:</span> \n                    <span className=\"font-medium ml-1\">{skill.xpPerAction}</span>\n                  </div>\n                  <div className=\"text-sm\">\n                    <span className=\"text-gray-500\">Status:</span> \n                    <span className={`font-medium ml-1 ${skill.isActive ? 'text-success' : 'text-gray-600'}`}>\n                      {skill.isActive ? 'Active' : 'Inactive'}\n                    </span>\n                  </div>\n                </div>\n                \n                {skill.mastery && skill.mastery.unlocks && Object.keys(skill.mastery.unlocks).length > 0 && (\n                  <div className=\"mt-3\">\n                    <h4 className=\"text-sm font-semibold mb-2\">Mastery Unlocks</h4>\n                    <ul className=\"text-sm space-y-1.5\">\n                      {Object.entries(skill.mastery.unlocks).map(([level, description]) => (\n                        <li \n                          key={level}\n                          className={`py-1 border-b border-gray-100 ${\n                            skill.level >= parseInt(level) \n                              ? 'text-gray-800' \n                              : 'text-gray-400'\n                          }`}\n                        >\n                          <span className={`inline-block w-16 font-medium ${\n                            skill.level >= parseInt(level) ? 'text-primary' : ''\n                          }`}>\n                            Level {level}:\n                          </span> \n                          {description}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default SkillPanel; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}