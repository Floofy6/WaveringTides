{"ast":null,"code":"import{useState,useCallback}from'react';import{useGameContext}from'../context/GameContext';/**\r\n * Calculate the XP required for the next level\r\n * This is a simple formula that can be adjusted as needed\r\n */const calculateXpForNextLevel=currentLevel=>{// Example formula: base 100 XP with 10% increase per level\nreturn Math.floor(100*Math.pow(1.1,currentLevel-1));};/**\r\n * Calculate the XP required for a specific mastery level\r\n * This uses a different formula than regular skill levels\r\n */export const calculateMasteryXpForLevel=level=>{// Example formula: steeper curve for mastery levels\nreturn Math.floor(150*Math.pow(level,1.8));};/**\r\n * useSkills hook - Manages skill-related state and operations\r\n */export const useSkills=()=>{const{gameState,updateGameState}=useGameContext();const[currentSkillId,setCurrentSkillId]=useState(null);const skills=(gameState===null||gameState===void 0?void 0:gameState.player.skills)||{};const currentSkill=currentSkillId?skills[currentSkillId]:null;/**\r\n   * Select a skill to view its details\r\n   */const selectSkill=useCallback(skillId=>{setCurrentSkillId(skillId);},[]);/**\r\n   * Start a skill activity\r\n   */const startSkill=useCallback(skillId=>{if(!gameState)return;const updatedSkills={...gameState.player.skills,[skillId]:{...gameState.player.skills[skillId],isActive:true,lastActiveTime:Date.now()}};updateGameState(prevState=>{if(!prevState)return null;return{...prevState,player:{...prevState.player,skills:updatedSkills}};});},[gameState,updateGameState]);/**\r\n   * Stop a skill activity\r\n   */const stopSkill=useCallback(skillId=>{if(!gameState)return;const updatedSkills={...gameState.player.skills,[skillId]:{...gameState.player.skills[skillId],isActive:false}};updateGameState(prevState=>{if(!prevState)return null;return{...prevState,player:{...prevState.player,skills:updatedSkills}};});},[gameState,updateGameState]);/**\r\n   * Add experience to a skill and handle level ups\r\n   */const addExperience=useCallback((skillId,amount)=>{if(!gameState)return;const skill=gameState.player.skills[skillId];if(!skill)return;let newXp=skill.xp+amount;let newLevel=skill.level;// Check for level up\nconst xpRequired=calculateXpForNextLevel(newLevel);while(newXp>=xpRequired){newXp-=xpRequired;newLevel++;}const updatedSkills={...gameState.player.skills,[skillId]:{...skill,level:newLevel,xp:newXp}};updateGameState(prevState=>{if(!prevState)return null;return{...prevState,player:{...prevState.player,skills:updatedSkills}};});},[gameState,updateGameState]);/**\r\n   * Get a list of all active skills\r\n   */const getActiveSkills=useCallback(()=>{if(!gameState)return[];return Object.keys(gameState.player.skills).filter(skillId=>gameState.player.skills[skillId].isActive);},[gameState]);/**\r\n   * Check if a skill has reached a specific level\r\n   */const hasReachedLevel=useCallback((skillId,level)=>{if(!gameState)return false;const skill=gameState.player.skills[skillId];return skill?skill.level>=level:false;},[gameState]);/**\r\n   * Add experience to a skill's mastery and handle level ups\r\n   */const addMasteryExperience=useCallback((skillId,amount)=>{if(!gameState)return;const skill=gameState.player.skills[skillId];if(!skill||!skill.mastery)return;const mastery=skill.mastery;let newXp=mastery.xp+amount;let newLevel=mastery.level;// Check for level up\nwhile(newXp>=calculateMasteryXpForLevel(newLevel+1)){newLevel++;}const updatedSkills={...gameState.player.skills,[skillId]:{...skill,mastery:{...mastery,level:newLevel,xp:newXp}}};updateGameState(prevState=>{if(!prevState)return null;return{...prevState,player:{...prevState.player,skills:updatedSkills}};});},[gameState,updateGameState]);return{skills,currentSkill,selectSkill,startSkill,stopSkill,addExperience,addMasteryExperience,getActiveSkills,hasReachedLevel};};","map":{"version":3,"names":["useState","useCallback","useGameContext","calculateXpForNextLevel","currentLevel","Math","floor","pow","calculateMasteryXpForLevel","level","useSkills","gameState","updateGameState","currentSkillId","setCurrentSkillId","skills","player","currentSkill","selectSkill","skillId","startSkill","updatedSkills","isActive","lastActiveTime","Date","now","prevState","stopSkill","addExperience","amount","skill","newXp","xp","newLevel","xpRequired","getActiveSkills","Object","keys","filter","hasReachedLevel","addMasteryExperience","mastery"],"sources":["C:/Users/Domin/OneDrive/Desktop/coding/WaveringTides/frontend/src/hooks/useSkills.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { useGameContext } from '../context/GameContext';\r\nimport { Skill } from '../types';\r\n\r\n/**\r\n * Calculate the XP required for the next level\r\n * This is a simple formula that can be adjusted as needed\r\n */\r\nconst calculateXpForNextLevel = (currentLevel: number): number => {\r\n  // Example formula: base 100 XP with 10% increase per level\r\n  return Math.floor(100 * Math.pow(1.1, currentLevel - 1));\r\n};\r\n\r\n/**\r\n * Calculate the XP required for a specific mastery level\r\n * This uses a different formula than regular skill levels\r\n */\r\nexport const calculateMasteryXpForLevel = (level: number): number => {\r\n  // Example formula: steeper curve for mastery levels\r\n  return Math.floor(150 * Math.pow(level, 1.8));\r\n};\r\n\r\n/**\r\n * useSkills hook - Manages skill-related state and operations\r\n */\r\nexport const useSkills = () => {\r\n  const { gameState, updateGameState } = useGameContext();\r\n  const [currentSkillId, setCurrentSkillId] = useState<string | null>(null);\r\n  \r\n  const skills = gameState?.player.skills || {};\r\n  const currentSkill = currentSkillId ? skills[currentSkillId] : null;\r\n  \r\n  /**\r\n   * Select a skill to view its details\r\n   */\r\n  const selectSkill = useCallback((skillId: string) => {\r\n    setCurrentSkillId(skillId);\r\n  }, []);\r\n  \r\n  /**\r\n   * Start a skill activity\r\n   */\r\n  const startSkill = useCallback((skillId: string) => {\r\n    if (!gameState) return;\r\n    \r\n    const updatedSkills = {\r\n      ...gameState.player.skills,\r\n      [skillId]: {\r\n        ...gameState.player.skills[skillId],\r\n        isActive: true,\r\n        lastActiveTime: Date.now()\r\n      }\r\n    };\r\n    \r\n    updateGameState((prevState) => {\r\n      if (!prevState) return null;\r\n      return {\r\n        ...prevState,\r\n        player: {\r\n          ...prevState.player,\r\n          skills: updatedSkills\r\n        }\r\n      };\r\n    });\r\n  }, [gameState, updateGameState]);\r\n  \r\n  /**\r\n   * Stop a skill activity\r\n   */\r\n  const stopSkill = useCallback((skillId: string) => {\r\n    if (!gameState) return;\r\n    \r\n    const updatedSkills = {\r\n      ...gameState.player.skills,\r\n      [skillId]: {\r\n        ...gameState.player.skills[skillId],\r\n        isActive: false\r\n      }\r\n    };\r\n    \r\n    updateGameState((prevState) => {\r\n      if (!prevState) return null;\r\n      return {\r\n        ...prevState,\r\n        player: {\r\n          ...prevState.player,\r\n          skills: updatedSkills\r\n        }\r\n      };\r\n    });\r\n  }, [gameState, updateGameState]);\r\n  \r\n  /**\r\n   * Add experience to a skill and handle level ups\r\n   */\r\n  const addExperience = useCallback((skillId: string, amount: number) => {\r\n    if (!gameState) return;\r\n    \r\n    const skill = gameState.player.skills[skillId];\r\n    if (!skill) return;\r\n    \r\n    let newXp = skill.xp + amount;\r\n    let newLevel = skill.level;\r\n    \r\n    // Check for level up\r\n    const xpRequired = calculateXpForNextLevel(newLevel);\r\n    while (newXp >= xpRequired) {\r\n      newXp -= xpRequired;\r\n      newLevel++;\r\n    }\r\n    \r\n    const updatedSkills = {\r\n      ...gameState.player.skills,\r\n      [skillId]: {\r\n        ...skill,\r\n        level: newLevel,\r\n        xp: newXp\r\n      }\r\n    };\r\n    \r\n    updateGameState((prevState) => {\r\n      if (!prevState) return null;\r\n      return {\r\n        ...prevState,\r\n        player: {\r\n          ...prevState.player,\r\n          skills: updatedSkills\r\n        }\r\n      };\r\n    });\r\n  }, [gameState, updateGameState]);\r\n  \r\n  /**\r\n   * Get a list of all active skills\r\n   */\r\n  const getActiveSkills = useCallback(() => {\r\n    if (!gameState) return [];\r\n    \r\n    return Object.keys(gameState.player.skills).filter(\r\n      skillId => gameState.player.skills[skillId].isActive\r\n    );\r\n  }, [gameState]);\r\n  \r\n  /**\r\n   * Check if a skill has reached a specific level\r\n   */\r\n  const hasReachedLevel = useCallback((skillId: string, level: number) => {\r\n    if (!gameState) return false;\r\n    \r\n    const skill = gameState.player.skills[skillId];\r\n    return skill ? skill.level >= level : false;\r\n  }, [gameState]);\r\n  \r\n  /**\r\n   * Add experience to a skill's mastery and handle level ups\r\n   */\r\n  const addMasteryExperience = useCallback((skillId: string, amount: number) => {\r\n    if (!gameState) return;\r\n    \r\n    const skill = gameState.player.skills[skillId];\r\n    if (!skill || !skill.mastery) return;\r\n    \r\n    const mastery = skill.mastery;\r\n    let newXp = mastery.xp + amount;\r\n    let newLevel = mastery.level;\r\n    \r\n    // Check for level up\r\n    while (newXp >= calculateMasteryXpForLevel(newLevel + 1)) {\r\n      newLevel++;\r\n    }\r\n    \r\n    const updatedSkills = {\r\n      ...gameState.player.skills,\r\n      [skillId]: {\r\n        ...skill,\r\n        mastery: {\r\n          ...mastery,\r\n          level: newLevel,\r\n          xp: newXp\r\n        }\r\n      }\r\n    };\r\n    \r\n    updateGameState((prevState) => {\r\n      if (!prevState) return null;\r\n      return {\r\n        ...prevState,\r\n        player: {\r\n          ...prevState.player,\r\n          skills: updatedSkills\r\n        }\r\n      };\r\n    });\r\n  }, [gameState, updateGameState]);\r\n  \r\n  return {\r\n    skills,\r\n    currentSkill,\r\n    selectSkill,\r\n    startSkill,\r\n    stopSkill,\r\n    addExperience,\r\n    addMasteryExperience,\r\n    getActiveSkills,\r\n    hasReachedLevel\r\n  };\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}