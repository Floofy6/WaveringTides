{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Shop=_ref=>{let{shopItems,playerGold,onBuyItem,isLoading=false,error=null}=_ref;const[selectedItem,setSelectedItem]=useState('');const[quantity,setQuantity]=useState(1);const[localError,setLocalError]=useState(null);// Reset local error when prop error changes\nuseEffect(()=>{if(error){setLocalError(error);}},[error]);const handleBuyItem=itemId=>{if(canAffordItem(itemId)){onBuyItem(itemId,quantity);// We don't reset quantity here to make it easier for users to buy multiple batches\n}};const handleQuantityChange=e=>{const value=parseInt(e.target.value);if(!isNaN(value)&&value>0){setQuantity(value);}else{setQuantity(1);}};const canAffordItem=itemId=>{const item=shopItems.find(item=>item.id===itemId);return item&&item.buyPrice!==undefined?playerGold>=item.buyPrice*quantity:false;};const renderErrorMessage=()=>{if(!localError)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-danger/10 border border-danger rounded p-3 mb-4 relative\",children:[localError,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setLocalError(null),className:\"absolute top-1 right-2 text-danger hover:text-danger-dark\",\"aria-label\":\"Close error message\",children:\"\\xD7\"})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-medium\",children:[\"Your gold: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-warning\",children:playerGold.toLocaleString()})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",className:\"text-sm text-gray-600\",children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",min:\"1\",value:quantity,onChange:handleQuantityChange,disabled:isLoading,className:\"w-20 p-1.5 border border-panel-border rounded text-center focus:border-primary focus:ring-1 focus:ring-primary outline-none\"})]}),renderErrorMessage(),isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center p-6 text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin mr-2 h-5 w-5 border-2 border-primary border-t-transparent rounded-full\"}),\"Processing your purchase...\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-3\",children:shopItems.map(item=>{var _item$buyPrice$toLoca,_item$buyPrice;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-item-bg border border-panel-border rounded-lg p-3 hover:shadow-md transition-shadow flex justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-text mb-2\",children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Price: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-warning font-medium\",children:[(_item$buyPrice$toLoca=(_item$buyPrice=item.buyPrice)===null||_item$buyPrice===void 0?void 0:_item$buyPrice.toLocaleString())!==null&&_item$buyPrice$toLoca!==void 0?_item$buyPrice$toLoca:'N/A',\" gold each\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Total: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-warning font-medium\",children:[item.buyPrice!==undefined?(item.buyPrice*quantity).toLocaleString():'N/A',\" gold\"]})]})]}),item.stats&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-2 bg-panel rounded space-y-1 text-sm\",children:[item.stats.attackBonus&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"Attack: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[\"+\",item.stats.attackBonus]})]}),item.stats.strengthBonus&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"Strength: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[\"+\",item.stats.strengthBonus]})]}),item.stats.defenseBonus&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"Defense: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[\"+\",item.stats.defenseBonus]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 flex items-center\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleBuyItem(item.id),disabled:!canAffordItem(item.id)||isLoading,className:`px-4 py-2 rounded text-sm font-medium transition-colors ${canAffordItem(item.id)&&!isLoading?'bg-primary text-white hover:bg-primary-dark':'bg-gray-300 text-gray-500 cursor-not-allowed'}`,children:[\"Buy \",quantity]})})]},item.id);})})]});};export default Shop;// Add CSS styles for better layout\n// .shop-container { padding: 20px; }\n// .shop-items { display: flex; flex-wrap: wrap; gap: 20px; }\n// .shop-item { border: 1px solid #ccc; padding: 10px; border-radius: 5px; width: 200px; }\n// .shop-item h3 { margin: 0 0 10px; }\n// .shop-item p { margin: 5px 0; }\n// .shop-item button { margin-top: 10px; }\n// .quantity-control { margin-bottom: 16px; }\n// .error-message { background-color: #ffecec; border: 1px solid #f5aca6; padding: 10px; margin-bottom: 15px; position: relative; }\n// .close-error { background: none; border: none; position: absolute; right: 5px; top: 5px; cursor: pointer; }\n// .item-stats { margin: 10px 0; padding: 5px; background: #f7f7f7; border-radius: 4px; }","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Shop","_ref","shopItems","playerGold","onBuyItem","isLoading","error","selectedItem","setSelectedItem","quantity","setQuantity","localError","setLocalError","handleBuyItem","itemId","canAffordItem","handleQuantityChange","e","value","parseInt","target","isNaN","item","find","id","buyPrice","undefined","renderErrorMessage","className","children","onClick","toLocaleString","htmlFor","type","min","onChange","disabled","map","_item$buyPrice$toLoca","_item$buyPrice","name","stats","attackBonus","strengthBonus","defenseBonus"],"sources":["C:/Users/Domin/Desktop/coding/WaveringTides-master/frontend/src/components/Shop.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Item } from '../types';\n\ninterface ShopProps {\n  shopItems: Item[];\n  playerGold: number;\n  onBuyItem: (itemId: string, quantity: number) => void;\n  isLoading?: boolean;\n  error?: string | null;\n}\n\nconst Shop: React.FC<ShopProps> = ({ \n  shopItems, \n  playerGold, \n  onBuyItem, \n  isLoading = false, \n  error = null \n}) => {\n  const [selectedItem, setSelectedItem] = useState<string>('');\n  const [quantity, setQuantity] = useState<number>(1);\n  const [localError, setLocalError] = useState<string | null>(null);\n\n  // Reset local error when prop error changes\n  useEffect(() => {\n    if (error) {\n      setLocalError(error);\n    }\n  }, [error]);\n\n  const handleBuyItem = (itemId: string) => {\n    if (canAffordItem(itemId)) {\n      onBuyItem(itemId, quantity);\n      // We don't reset quantity here to make it easier for users to buy multiple batches\n    }\n  };\n\n  const handleQuantityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (!isNaN(value) && value > 0) {\n      setQuantity(value);\n    } else {\n      setQuantity(1);\n    }\n  };\n\n  const canAffordItem = (itemId: string): boolean => {\n    const item = shopItems.find(item => item.id === itemId);\n    return item && item.buyPrice !== undefined ? playerGold >= item.buyPrice * quantity : false;\n  };\n\n  const renderErrorMessage = () => {\n    if (!localError) return null;\n    \n    return (\n      <div className=\"bg-danger/10 border border-danger rounded p-3 mb-4 relative\">\n        {localError}\n        <button \n          onClick={() => setLocalError(null)} \n          className=\"absolute top-1 right-2 text-danger hover:text-danger-dark\"\n          aria-label=\"Close error message\"\n        >\n          Ã—\n        </button>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center\">\n        <p className=\"text-base font-medium\">Your gold: <span className=\"text-warning\">{playerGold.toLocaleString()}</span></p>\n      </div>\n      \n      <div className=\"flex items-center space-x-3 mb-4\">\n        <label htmlFor=\"quantity\" className=\"text-sm text-gray-600\">Quantity:</label>\n        <input\n          type=\"number\"\n          id=\"quantity\"\n          min=\"1\"\n          value={quantity}\n          onChange={handleQuantityChange}\n          disabled={isLoading}\n          className=\"w-20 p-1.5 border border-panel-border rounded text-center focus:border-primary focus:ring-1 focus:ring-primary outline-none\"\n        />\n      </div>\n      \n      {renderErrorMessage()}\n      \n      {isLoading ? (\n        <div className=\"flex items-center justify-center p-6 text-gray-500\">\n          <div className=\"animate-spin mr-2 h-5 w-5 border-2 border-primary border-t-transparent rounded-full\"></div>\n          Processing your purchase...\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 gap-3\">\n          {shopItems.map(item => (\n            <div \n              key={item.id} \n              className=\"bg-item-bg border border-panel-border rounded-lg p-3 hover:shadow-md transition-shadow flex justify-between\"\n            >\n              <div className=\"flex-grow\">\n                <h3 className=\"font-semibold text-text mb-2\">{item.name}</h3>\n                <div className=\"space-y-1 text-sm\">\n                  <p className=\"text-gray-600\">Price: <span className=\"text-warning font-medium\">{item.buyPrice?.toLocaleString() ?? 'N/A'} gold each</span></p>\n                  <p className=\"text-gray-600\">Total: <span className=\"text-warning font-medium\">{item.buyPrice !== undefined ? (item.buyPrice * quantity).toLocaleString() : 'N/A'} gold</span></p>\n                </div>\n                \n                {item.stats && (\n                  <div className=\"mt-2 p-2 bg-panel rounded space-y-1 text-sm\">\n                    {item.stats.attackBonus && <p className=\"text-gray-700\">Attack: <span className=\"text-success\">+{item.stats.attackBonus}</span></p>}\n                    {item.stats.strengthBonus && <p className=\"text-gray-700\">Strength: <span className=\"text-success\">+{item.stats.strengthBonus}</span></p>}\n                    {item.stats.defenseBonus && <p className=\"text-gray-700\">Defense: <span className=\"text-success\">+{item.stats.defenseBonus}</span></p>}\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"ml-4 flex items-center\">\n                <button\n                  onClick={() => handleBuyItem(item.id)}\n                  disabled={!canAffordItem(item.id) || isLoading}\n                  className={`px-4 py-2 rounded text-sm font-medium transition-colors ${\n                    canAffordItem(item.id) && !isLoading\n                      ? 'bg-primary text-white hover:bg-primary-dark' \n                      : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  }`}\n                >\n                  Buy {quantity}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Shop;\n\n// Add CSS styles for better layout\n// .shop-container { padding: 20px; }\n// .shop-items { display: flex; flex-wrap: wrap; gap: 20px; }\n// .shop-item { border: 1px solid #ccc; padding: 10px; border-radius: 5px; width: 200px; }\n// .shop-item h3 { margin: 0 0 10px; }\n// .shop-item p { margin: 5px 0; }\n// .shop-item button { margin-top: 10px; }\n// .quantity-control { margin-bottom: 16px; }\n// .error-message { background-color: #ffecec; border: 1px solid #f5aca6; padding: 10px; margin-bottom: 15px; position: relative; }\n// .close-error { background: none; border: none; position: absolute; right: 5px; top: 5px; cursor: pointer; }\n// .item-stats { margin: 10px 0; padding: 5px; background: #f7f7f7; border-radius: 4px; }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}