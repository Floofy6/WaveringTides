{"ast":null,"code":"import{useGameContext}from'../context/GameContext';export const useInventory=()=>{const{gameState,updateGameState}=useGameContext();const sellItem=(itemId,quantity)=>{if(!gameState)return;const item=gameState.player.inventory[itemId];if(!item||!item.sellPrice)return;updateGameState(prevState=>{if(!prevState)return prevState;const newInventory={...prevState.player.inventory};const newGold=prevState.player.gold+item.sellPrice*quantity;if(item.quantity<=quantity){delete newInventory[itemId];}else{newInventory[itemId]={...item,quantity:item.quantity-quantity};}return{...prevState,player:{...prevState.player,gold:newGold,inventory:newInventory}};});};const equipItem=itemId=>{if(!gameState)return;const item=gameState.player.inventory[itemId];if(!item||item.type!=='equipment'||!item.slot)return;updateGameState(prevState=>{if(!prevState)return prevState;const newInventory={...prevState.player.inventory};const newEquipment={...prevState.player.equipment};// Type guard to ensure slot is 'weapon' or 'armor'\nif(item.slot==='weapon'||item.slot==='armor'){// Unequip current item if any\nconst currentEquipped=newEquipment[item.slot];if(currentEquipped){if(newInventory[currentEquipped.id]){newInventory[currentEquipped.id].quantity+=1;}else{newInventory[currentEquipped.id]={...currentEquipped,quantity:1};}}// Equip new item\nnewEquipment[item.slot]={...item,quantity:1};}// Remove from inventory\nif(item.quantity<=1){delete newInventory[itemId];}else{newInventory[itemId]={...item,quantity:item.quantity-1};}return{...prevState,player:{...prevState.player,inventory:newInventory,equipment:newEquipment}};});};return{inventory:(gameState===null||gameState===void 0?void 0:gameState.player.inventory)||{},sellItem,equipItem};};","map":{"version":3,"names":["useGameContext","useInventory","gameState","updateGameState","sellItem","itemId","quantity","item","player","inventory","sellPrice","prevState","newInventory","newGold","gold","equipItem","type","slot","newEquipment","equipment","currentEquipped","id"],"sources":["C:/Users/Domin/OneDrive/Desktop/coding/WaveringTides/frontend/src/hooks/useInventory.ts"],"sourcesContent":["import { useGameContext } from '../context/GameContext';\r\nimport { GameState, Item } from '../types';\r\n\r\nexport const useInventory = () => {\r\n  const { gameState, updateGameState } = useGameContext();\r\n  \r\n  const sellItem = (itemId: string, quantity: number) => {\r\n    if (!gameState) return;\r\n    \r\n    const item = gameState.player.inventory[itemId];\r\n    if (!item || !item.sellPrice) return;\r\n    \r\n    updateGameState((prevState: GameState | null) => {\r\n      if (!prevState) return prevState;\r\n      \r\n      const newInventory = { ...prevState.player.inventory };\r\n      const newGold = prevState.player.gold + (item.sellPrice! * quantity);\r\n      \r\n      if (item.quantity <= quantity) {\r\n        delete newInventory[itemId];\r\n      } else {\r\n        newInventory[itemId] = {\r\n          ...item,\r\n          quantity: item.quantity - quantity\r\n        };\r\n      }\r\n      \r\n      return {\r\n        ...prevState,\r\n        player: {\r\n          ...prevState.player,\r\n          gold: newGold,\r\n          inventory: newInventory\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  const equipItem = (itemId: string) => {\r\n    if (!gameState) return;\r\n    \r\n    const item = gameState.player.inventory[itemId];\r\n    if (!item || item.type !== 'equipment' || !item.slot) return;\r\n    \r\n    updateGameState((prevState: GameState | null) => {\r\n      if (!prevState) return prevState;\r\n      \r\n      const newInventory = { ...prevState.player.inventory };\r\n      const newEquipment = { ...prevState.player.equipment };\r\n      \r\n      // Type guard to ensure slot is 'weapon' or 'armor'\r\n      if (item.slot === 'weapon' || item.slot === 'armor') {\r\n        // Unequip current item if any\r\n        const currentEquipped = newEquipment[item.slot];\r\n        if (currentEquipped) {\r\n          if (newInventory[currentEquipped.id]) {\r\n            newInventory[currentEquipped.id].quantity += 1;\r\n          } else {\r\n            newInventory[currentEquipped.id] = {\r\n              ...currentEquipped,\r\n              quantity: 1\r\n            };\r\n          }\r\n        }\r\n      \r\n        // Equip new item\r\n        newEquipment[item.slot] = { ...item, quantity: 1 };\r\n      }\r\n      \r\n      // Remove from inventory\r\n      if (item.quantity <= 1) {\r\n        delete newInventory[itemId];\r\n      } else {\r\n        newInventory[itemId] = {\r\n          ...item,\r\n          quantity: item.quantity - 1\r\n        };\r\n      }\r\n      \r\n      return {\r\n        ...prevState,\r\n        player: {\r\n          ...prevState.player,\r\n          inventory: newInventory,\r\n          equipment: newEquipment\r\n        }\r\n      };\r\n    });\r\n  };\r\n  \r\n  return {\r\n    inventory: gameState?.player.inventory || {},\r\n    sellItem,\r\n    equipItem\r\n  };\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}